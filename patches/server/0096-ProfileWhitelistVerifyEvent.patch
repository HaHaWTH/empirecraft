From 0f76e8f012d55def71a95ef8ae790dcfa8c2a643 Mon Sep 17 00:00:00 2001
From: Aikar <aikar@aikar.co>
Date: Mon, 3 Jul 2017 18:11:10 -0500
Subject: [PATCH] ProfileWhitelistVerifyEvent

---
 src/main/java/net/minecraft/server/PlayerList.java | 9 ++++++++-
 1 file changed, 8 insertions(+), 1 deletion(-)

diff --git a/src/main/java/net/minecraft/server/PlayerList.java b/src/main/java/net/minecraft/server/PlayerList.java
index 976af5de0b..b2a21658a8 100644
--- a/src/main/java/net/minecraft/server/PlayerList.java
+++ b/src/main/java/net/minecraft/server/PlayerList.java
@@ -1202,7 +1202,14 @@ public abstract class PlayerList {
     }
 
     public boolean isWhitelisted(GameProfile gameprofile) {
-        return !this.hasWhitelist || this.operators.d(gameprofile) || this.whitelist.d(gameprofile);
+        // Paper start
+        boolean isOp = this.operators.d(gameprofile);
+        boolean isWhitelisted = !this.hasWhitelist || isOp || this.whitelist.d(gameprofile);
+        final com.destroystokyo.paper.event.profile.ProfileWhitelistVerifyEvent event;
+        event = new com.destroystokyo.paper.event.profile.ProfileWhitelistVerifyEvent(gameprofile, isWhitelisted, isOp);
+        event.callEvent();
+        return event.isWhitelisted();
+        // Paper end
     }
 
     public boolean isOp(GameProfile gameprofile) {
-- 
2.13.0

