From adb7858b99b7d919e9a2b97e74324608c9c00a8e Mon Sep 17 00:00:00 2001
From: Aikar <aikar@aikar.co>
Date: Tue, 19 May 2015 23:47:32 -0400
Subject: [PATCH] Disable Repair Cost

Handled on Plugin Level on a Per Player basis
---
 src/main/java/net/minecraft/server/ItemStack.java                 | 3 +++
 src/main/java/org/bukkit/craftbukkit/inventory/CraftMetaItem.java | 2 +-
 2 files changed, 4 insertions(+), 1 deletion(-)

diff --git a/src/main/java/net/minecraft/server/ItemStack.java b/src/main/java/net/minecraft/server/ItemStack.java
index ffefac530d..b08cd3706b 100644
--- a/src/main/java/net/minecraft/server/ItemStack.java
+++ b/src/main/java/net/minecraft/server/ItemStack.java
@@ -156,6 +156,7 @@ public final class ItemStack {
                 this.item.a(this.tag);
                 // CraftBukkit end
             }
+            if (this.tag.hasKey("RepairCost")) { this.tag.remove("RepairCost"); } // EMC
         }
     }
 
@@ -746,10 +747,12 @@ public final class ItemStack {
     }
 
     public int getRepairCost() {
+        if (true) return 0; // EMC
         return this.hasTag() && this.tag.hasKeyOfType("RepairCost", 3) ? this.tag.getInt("RepairCost") : 0;
     }
 
     public void setRepairCost(int i) {
+        if (true) return; // EMC
         if (!this.hasTag()) {
             this.tag = new NBTTagCompound();
         }
diff --git a/src/main/java/org/bukkit/craftbukkit/inventory/CraftMetaItem.java b/src/main/java/org/bukkit/craftbukkit/inventory/CraftMetaItem.java
index 0cdc8007a4..2babf30c90 100644
--- a/src/main/java/org/bukkit/craftbukkit/inventory/CraftMetaItem.java
+++ b/src/main/java/org/bukkit/craftbukkit/inventory/CraftMetaItem.java
@@ -291,7 +291,7 @@ class CraftMetaItem implements ItemMeta, Repairable {
 
         this.enchantments = buildEnchantments(tag, ENCHANTMENTS);
 
-        if (tag.hasKey(REPAIR.NBT)) {
+        if (false && tag.hasKey(REPAIR.NBT)) { // EMC
             repairCost = tag.getInt(REPAIR.NBT);
         }
 
-- 
2.15.1

