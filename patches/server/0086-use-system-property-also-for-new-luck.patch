From 43e80ad73fc81654443442cbe748babd0ca3fc86 Mon Sep 17 00:00:00 2001
From: Aikar <aikar@aikar.co>
Date: Sat, 16 Jun 2018 13:18:10 -0400
Subject: [PATCH] use system property also for new luck

---
 src/main/java/net/minecraft/server/LootSelectorEntry.java | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/src/main/java/net/minecraft/server/LootSelectorEntry.java b/src/main/java/net/minecraft/server/LootSelectorEntry.java
index c2a4ed6cf0..063a35ba84 100644
--- a/src/main/java/net/minecraft/server/LootSelectorEntry.java
+++ b/src/main/java/net/minecraft/server/LootSelectorEntry.java
@@ -32,7 +32,7 @@ public abstract class LootSelectorEntry {
         // This is vanilla
         float qualityModifer = (float) this.getQuality() * f;
         double baseWeight = (this.getWeight() + qualityModifer);
-        if (com.destroystokyo.paper.PaperConfig.useAlternativeLuckFormula) {
+        if (USE_NEW_LUCK || com.destroystokyo.paper.PaperConfig.useAlternativeLuckFormula) {
             // Random boost to avoid losing precision in the final int cast on return
             final int weightBoost = 100;
             baseWeight *= weightBoost;
@@ -49,6 +49,8 @@ public abstract class LootSelectorEntry {
         lastWeight = (int) Math.max(0, Math.floor(baseWeight));
         return lastWeight;
     }
+
+    public static final boolean USE_NEW_LUCK = Boolean.getBoolean("use-new-luck");
     private Float lastLuck = null;
     private int lastWeight = 0;
     // Paper end
-- 
2.18.0

