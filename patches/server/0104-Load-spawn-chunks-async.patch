From a7db45a067aa181b2f2aa7dc9842d8f2287b68bf Mon Sep 17 00:00:00 2001
From: Aikar <aikar@aikar.co>
Date: Sun, 15 Mar 2020 22:10:57 -0400
Subject: [PATCH] Load spawn chunks async

---
 src/main/java/net/minecraft/server/MinecraftServer.java | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/src/main/java/net/minecraft/server/MinecraftServer.java b/src/main/java/net/minecraft/server/MinecraftServer.java
index 079d10bc02..085f2de65e 100644
--- a/src/main/java/net/minecraft/server/MinecraftServer.java
+++ b/src/main/java/net/minecraft/server/MinecraftServer.java
@@ -625,10 +625,10 @@ public abstract class MinecraftServer extends IAsyncTaskHandlerReentrant<TickTas
             // just keep in mind too that executeModerately will handle player network queue (i.e commands)
             int centerX = blockposition.getX() >> 4;
             int centerZ = blockposition.getZ() >> 4;
-            radiusChunks += 2; // we need to load radius +2 to get the chunks in ticking level
+            radiusChunks = 1; // we need to load radius +2 to get the chunks in ticking level // EMC
             for (int xoff = -radiusChunks; xoff <= radiusChunks; ++xoff) {
                 for (int zoff = -radiusChunks; zoff <= radiusChunks; ++zoff) {
-                    worldserver.getChunkAt(centerX + xoff, centerZ + zoff);
+                    worldserver.getWorld().getChunkAtAsync(centerX + xoff, centerZ + zoff); // EMC
                 }
             }
         }
-- 
2.25.1

