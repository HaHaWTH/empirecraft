From dfa0513bb8067c4f30e67a10c35bb6e776217c37 Mon Sep 17 00:00:00 2001
From: Aikar <aikar@aikar.co>
Date: Fri, 27 Mar 2020 18:09:35 -0400
Subject: [PATCH] Improve Insentient hasTasks EAR Immunity to not be so giving

---
 src/main/java/org/spigotmc/ActivationRange.java | 6 ++----
 1 file changed, 2 insertions(+), 4 deletions(-)

diff --git a/src/main/java/org/spigotmc/ActivationRange.java b/src/main/java/org/spigotmc/ActivationRange.java
index a462c246bf..b554e09351 100644
--- a/src/main/java/org/spigotmc/ActivationRange.java
+++ b/src/main/java/org/spigotmc/ActivationRange.java
@@ -291,13 +291,11 @@ public class ActivationRange
                 {
                     // Triggered some sort of immunity, give 20 full ticks before we check again.
                     entity.activatedTick = MinecraftServer.currentTick + 20;
+                } else {
+                    entity.activatedTick = MinecraftServer.currentTick; // Paper
                 }
                 isActive = true;
-            // Paper start
-            } else if (entity instanceof EntityInsentient && ((EntityInsentient) entity).targetSelector.hasTasks()) {
-                isActive = true;
             }
-            // Paper end
             // Add a little performance juice to active entities. Skip 1/4 if not immune.
         } else if ( !entity.defaultActivationState && entity.ticksLived % 4 == 0 && !(entity instanceof EntityInsentient && ((EntityInsentient) entity).targetSelector.hasTasks()) && !checkEntityImmunities( entity ) ) // Paper - add targetSelector.hasTasks
         {
-- 
2.25.1

