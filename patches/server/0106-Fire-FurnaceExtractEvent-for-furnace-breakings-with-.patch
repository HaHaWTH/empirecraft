From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: chickeneer <emcchickeneer@gmail.com>
Date: Wed, 2 Jun 2021 09:16:37 -0500
Subject: [PATCH] Fire FurnaceExtractEvent for furnace breakings with null
 players

---
 .../minecraft/world/level/block/entity/TileEntityFurnace.java | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/src/main/java/net/minecraft/world/level/block/entity/TileEntityFurnace.java b/src/main/java/net/minecraft/world/level/block/entity/TileEntityFurnace.java
index 9ce19b89c16eb6edd3d5d5cc87a966a37f66895c..f2cdfd0e13dbe4429d52b7ca9d43d71b32d488b9 100644
--- a/src/main/java/net/minecraft/world/level/block/entity/TileEntityFurnace.java
+++ b/src/main/java/net/minecraft/world/level/block/entity/TileEntityFurnace.java
@@ -616,8 +616,8 @@ public abstract class TileEntityFurnace extends TileEntityContainer implements I
         }
 
         // CraftBukkit start - fire FurnaceExtractEvent
-        if (amount != 0) {
-            FurnaceExtractEvent event = new FurnaceExtractEvent((Player) entityhuman.getBukkitEntity(), CraftBlock.at(world, position), org.bukkit.craftbukkit.util.CraftMagicNumbers.getMaterial(itemstack.getItem()), amount, j);
+        if (true || amount != 0) { // EMC - fire event for block breaking
+            FurnaceExtractEvent event = new FurnaceExtractEvent(entityhuman == null ? null : (Player) entityhuman.getBukkitEntity(), CraftBlock.at(world, position), org.bukkit.craftbukkit.util.CraftMagicNumbers.getMaterial(itemstack.getItem()), amount, j); // EMC - add entityhuman == null ? null :
             world.getServer().getPluginManager().callEvent(event);
             j = event.getExpToDrop();
         }
