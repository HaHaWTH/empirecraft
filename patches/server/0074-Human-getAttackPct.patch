From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Aikar <aikar@aikar.co>
Date: Sun, 17 Jun 2018 02:09:37 -0400
Subject: [PATCH] Human#getAttackPct

---
 .../java/net/minecraft/world/entity/player/EntityHuman.java     | 2 ++
 .../java/org/bukkit/craftbukkit/entity/CraftHumanEntity.java    | 2 ++
 2 files changed, 4 insertions(+)

diff --git a/src/main/java/net/minecraft/world/entity/player/EntityHuman.java b/src/main/java/net/minecraft/world/entity/player/EntityHuman.java
index 525ea033f0feb6ecad8fa0d38d7b02a46235dde1..e507d936c89512d8dbd582f72d232a988c9277c8 100644
--- a/src/main/java/net/minecraft/world/entity/player/EntityHuman.java
+++ b/src/main/java/net/minecraft/world/entity/player/EntityHuman.java
@@ -175,6 +175,7 @@ public abstract class EntityHuman extends EntityLiving {
     // CraftBukkit start
     public boolean fauxSleeping;
     public int oldLevel = -1;
+    public float lastAttackPct = 0; // EMC
 
     @Override
     public CraftHumanEntity getBukkitEntity() {
@@ -1129,6 +1130,7 @@ public abstract class EntityHuman extends EntityLiving {
                 }
 
                 float f2 = this.getAttackCooldown(0.5F);
+                this.lastAttackPct = f2; // EMC
 
                 f *= 0.2F + f2 * f2 * 0.8F;
                 f1 *= f2;
diff --git a/src/main/java/org/bukkit/craftbukkit/entity/CraftHumanEntity.java b/src/main/java/org/bukkit/craftbukkit/entity/CraftHumanEntity.java
index b99423b3b413fc6364c6530a99e3c74dd406e1b4..ff578e49f3d4787fa75b1f1d582a2c89846561d2 100644
--- a/src/main/java/org/bukkit/craftbukkit/entity/CraftHumanEntity.java
+++ b/src/main/java/org/bukkit/craftbukkit/entity/CraftHumanEntity.java
@@ -72,6 +72,8 @@ public class CraftHumanEntity extends CraftLivingEntity implements HumanEntity {
     private boolean op;
     private GameMode mode;
 
+    @Override public float getAttackPct() { return getHandle().lastAttackPct; } // EMC
+
     public CraftHumanEntity(final CraftServer server, final EntityHuman entity) {
         super(server, entity);
         mode = server.getDefaultGameMode();
