From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Aikar <aikar@aikar.co>
Date: Wed, 12 Mar 2014 23:10:04 -0400
Subject: [PATCH] LivingEntityArmorProtectEvent

To control if armor should protect entity, how much if so, and how much item damage to give.
---
 .../java/net/minecraft/world/entity/EntityLiving.java     | 8 +++++++-
 1 file changed, 7 insertions(+), 1 deletion(-)

diff --git a/src/main/java/net/minecraft/world/entity/EntityLiving.java b/src/main/java/net/minecraft/world/entity/EntityLiving.java
index e2fba8cfc2e106eaffc7c8f41bde9122671cef2d..1a8ed19b5492030ea380512388033b3a089a119b 100644
--- a/src/main/java/net/minecraft/world/entity/EntityLiving.java
+++ b/src/main/java/net/minecraft/world/entity/EntityLiving.java
@@ -138,6 +138,7 @@ import org.bukkit.event.entity.EntityTeleportEvent;
 import org.bukkit.event.player.PlayerItemConsumeEvent;
 // CraftBukkit end
 
+import com.empireminecraft.customevents.LivingEntityArmorProtectEvent; // EMC
 
 public abstract class EntityLiving extends Entity {
 
@@ -1831,7 +1832,12 @@ public abstract class EntityLiving extends Entity {
     }
 
     public int getArmorStrength() {
-        return MathHelper.floor(this.b(GenericAttributes.ARMOR));
+        // EMC start
+        final double value = this.b(GenericAttributes.ARMOR);
+        LivingEntityArmorProtectEvent event = new LivingEntityArmorProtectEvent(this.getBukkitLivingEntity(), value);
+        event.callEvent();
+        return MathHelper.floor(event.getArmorValue());
+        // EMC end
     }
 
     protected void damageArmor(DamageSource damagesource, float f) {}
