From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Aikar <aikar@aikar.co>
Date: Mon, 16 Mar 2020 03:07:02 -0400
Subject: [PATCH] dont load chunks for physics

---
 src/main/java/net/minecraft/server/Block.java | 3 ++-
 src/main/java/net/minecraft/server/World.java | 3 ++-
 2 files changed, 4 insertions(+), 2 deletions(-)

diff --git a/src/main/java/net/minecraft/server/Block.java b/src/main/java/net/minecraft/server/Block.java
index 00fd805384bd9ddb14f898b00a96a5eabc65f8e5..d59d1a20615693415fbaa70b6cf88d0a3ce46196 100644
--- a/src/main/java/net/minecraft/server/Block.java
+++ b/src/main/java/net/minecraft/server/Block.java
@@ -149,7 +149,8 @@ public class Block implements IMaterial {
                 EnumDirection enumdirection = aenumdirection[k];
 
                 blockposition_pooledblockposition.g(blockposition).c(enumdirection);
-                IBlockData iblockdata1 = generatoraccess.getType(blockposition_pooledblockposition);
+                IBlockData iblockdata1 = generatoraccess.getTypeIfLoaded(blockposition_pooledblockposition); // EMC
+                if (iblockdata1 == null) continue; // EMC
                 IBlockData iblockdata2 = iblockdata1.updateState(enumdirection.opposite(), iblockdata, generatoraccess, blockposition_pooledblockposition, blockposition);
 
                 a(iblockdata1, iblockdata2, generatoraccess, blockposition_pooledblockposition, i);
diff --git a/src/main/java/net/minecraft/server/World.java b/src/main/java/net/minecraft/server/World.java
index a0c2e0b6d3ee4d8c85e27124f6508a5db194cf7b..e7cda3573e4f7a69df6ca61409d0bb76327687fe 100644
--- a/src/main/java/net/minecraft/server/World.java
+++ b/src/main/java/net/minecraft/server/World.java
@@ -592,7 +592,8 @@ public abstract class World implements GeneratorAccess, AutoCloseable {
     public void neighborChanged(BlockPosition pos, Block blockIn, BlockPosition fromPos) { a(pos, blockIn, fromPos); } // Paper - OBFHELPER
     public void a(BlockPosition blockposition, Block block, BlockPosition blockposition1) {
         if (!this.isClientSide) {
-            IBlockData iblockdata = this.getType(blockposition);
+            IBlockData iblockdata = this.getTypeIfLoaded(blockposition); // EMC
+            if (iblockdata == null) return; // EMC
 
             try {
                 // CraftBukkit start
