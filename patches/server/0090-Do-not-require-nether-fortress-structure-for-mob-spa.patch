From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: chickeneer <emcchickeneer@gmail.com>
Date: Sun, 17 May 2020 15:40:10 -0500
Subject: [PATCH] Do not require nether fortress structure for mob spawning

Due to failed fortress conversions - some structure data is missing.
This allows players to make their own fortress with nether bricks

diff --git a/src/main/java/net/minecraft/world/level/NaturalSpawner.java b/src/main/java/net/minecraft/world/level/NaturalSpawner.java
index c6bddf5e08376f1f254a27fc38647587eefcb00a..1bd4af539c259e687af4a2c0e1e6cca905527e30 100644
--- a/src/main/java/net/minecraft/world/level/NaturalSpawner.java
+++ b/src/main/java/net/minecraft/world/level/NaturalSpawner.java
@@ -47,6 +47,7 @@ import net.minecraft.world.level.storage.LevelData;
 import net.minecraft.world.phys.Vec3;
 import org.apache.logging.log4j.LogManager;
 import org.apache.logging.log4j.Logger;
+import org.bukkit.World;
 import org.bukkit.event.entity.CreatureSpawnEvent.SpawnReason;
 // CraftBukkit end
 
@@ -428,7 +429,7 @@ public final class NaturalSpawner {
     }
 
     public static boolean isInNetherFortressBounds(BlockPos pos, ServerLevel world, MobCategory spawnGroup, StructureFeatureManager structureAccessor) {
-        return spawnGroup == MobCategory.MONSTER && world.getBlockState(pos.below()).is(Blocks.NETHER_BRICKS) && structureAccessor.getStructureAt(pos, StructureFeature.NETHER_BRIDGE).isValid();
+        return spawnGroup == MobCategory.MONSTER && world.getBlockState(pos.below()).is(Blocks.NETHER_BRICKS) && world.getWorld().getEnvironment() == World.Environment.NETHER; /*&& structureAccessor.getStructureAt(pos, StructureFeature.NETHER_BRIDGE).isValid();*/ // EMC - add nether check and remove structure requirement
     }
 
     private static BlockPos getRandomPosWithin(Level world, LevelChunk chunk) {
