From e71256740a51a402e1d2a4ec0c946b502ae32159 Mon Sep 17 00:00:00 2001
From: Aikar <aikar@aikar.co>
Date: Wed, 1 Jun 2016 23:29:17 -0400
Subject: [PATCH] Reset Ender Crystals on Dragon Spawn

---
 src/main/java/net/minecraft/server/EnderDragonBattle.java | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/src/main/java/net/minecraft/server/EnderDragonBattle.java b/src/main/java/net/minecraft/server/EnderDragonBattle.java
index 1f67b9c409..b874ed701f 100644
--- a/src/main/java/net/minecraft/server/EnderDragonBattle.java
+++ b/src/main/java/net/minecraft/server/EnderDragonBattle.java
@@ -367,6 +367,7 @@ public class EnderDragonBattle {
         entityenderdragon.setPositionRotation(0.0D, 128.0D, 0.0D, this.d.random.nextFloat() * 360.0F, 0.0F);
         this.d.addEntity(entityenderdragon);
         this.m = entityenderdragon.getUniqueID();
+        this.resetCrystals(); // EMC
         return entityenderdragon;
     }
 
@@ -463,6 +464,7 @@ public class EnderDragonBattle {
 
     }
 
+    private void resetCrystals() { this.f(); } // EMC // OBF HELPER
     public void f() {
         for(WorldGenEnder.Spike worldgenender$spike : WorldGenDecoratorSpike.a(this.d)) {
             for(EntityEnderCrystal entityendercrystal : this.d.a(EntityEnderCrystal.class, worldgenender$spike.f())) {
-- 
2.18.0

