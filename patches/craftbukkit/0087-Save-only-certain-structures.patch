From 932936b9c685450a6f0b6338b21d48105b575ff4 Mon Sep 17 00:00:00 2001
From: Aikar <aikar@aikar.co>
Date: Wed, 6 May 2015 01:59:51 -0400
Subject: [PATCH] Save only certain structures

---
 src/main/java/net/minecraft/server/StructureGenerator.java | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/src/main/java/net/minecraft/server/StructureGenerator.java b/src/main/java/net/minecraft/server/StructureGenerator.java
index 0f8211a..fb8c239 100644
--- a/src/main/java/net/minecraft/server/StructureGenerator.java
+++ b/src/main/java/net/minecraft/server/StructureGenerator.java
@@ -193,10 +193,11 @@ public abstract class StructureGenerator extends WorldGenBase {
         return null;
     }
 
+    List<String> allowedFiles = com.google.common.collect.Lists.newArrayList("Monument", "Stronghold", "Fortress"); // EMC
     private void a(World world) {
         if (this.d == null) {
             // Spigot Start
-            if ( world.spigotConfig.saveStructureInfo && !this.a().equals( "Mineshaft" ) )
+            if ( world.spigotConfig.saveStructureInfo && allowedFiles.contains(this.a() ) ) // EMC
             {
             this.d = (PersistentStructure) world.a(PersistentStructure.class, this.a());
             } else
-- 
1.9.1

