From 31b5d22256fd5044fd51d3eb15493c6fc013e92f Mon Sep 17 00:00:00 2001
From: Aikar <aikar@aikar.co>
Date: Sat, 20 Sep 2014 15:37:55 -0400
Subject: [PATCH] Update AntiXray to Timings v2

---
 src/main/java/org/spigotmc/AntiXray.java | 12 +++++-------
 1 file changed, 5 insertions(+), 7 deletions(-)

diff --git a/src/main/java/org/spigotmc/AntiXray.java b/src/main/java/org/spigotmc/AntiXray.java
index 7221b50..4c086d9 100644
--- a/src/main/java/org/spigotmc/AntiXray.java
+++ b/src/main/java/org/spigotmc/AntiXray.java
@@ -7,13 +7,11 @@ import net.minecraft.server.BlockPosition;
 import net.minecraft.server.Blocks;
 import net.minecraft.server.World;
 import org.bukkit.craftbukkit.util.CraftMagicNumbers;
+import org.spigotmc.timings.SpigotTimings;
 
 public class AntiXray
 {
 
-    private static final CustomTimingsHandler update = new CustomTimingsHandler( "xray - update" );
-    private static final CustomTimingsHandler obfuscate = new CustomTimingsHandler( "xray - obfuscate" );
-    /*========================================================================*/
     // Used to keep track of which blocks to obfuscate
     private final boolean[] obfuscateBlocks = new boolean[ Short.MAX_VALUE ];
     // Used to select a random replacement ore
@@ -51,9 +49,9 @@ public class AntiXray
     {
         if ( world.spigotConfig.antiXray )
         {
-            update.startTiming();
+            SpigotTimings.antiXrayUpdateTimer.startTiming();
             updateNearbyBlocks( world, position, 2, false ); // 2 is the radius, we shouldn't change it as that would make it exponentially slower
-            update.stopTiming();
+            SpigotTimings.antiXrayUpdateTimer.stopTiming();
         }
     }
 
@@ -65,9 +63,9 @@ public class AntiXray
     {
         if ( world.spigotConfig.antiXray )
         {
-            obfuscate.startTiming();
+            SpigotTimings.antiXrayObfuscateTimer.startTiming();
             obfuscate( chunkX, chunkY, bitmask, buffer, world );
-            obfuscate.stopTiming();
+            SpigotTimings.antiXrayObfuscateTimer.stopTiming();
         }
     }
 
-- 
1.9.1

