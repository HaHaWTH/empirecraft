From 254724d2737bb3e158c965a5c7ea9cf8031371b2 Mon Sep 17 00:00:00 2001
From: Aikar <aikar@aikar.co>
Date: Wed, 31 Oct 2012 23:26:58 -0400
Subject: [PATCH] EMC POM changes

---
 pom.xml                                            | 71 +++++++++++++++++-----
 .../org/bukkit/craftbukkit/util/Versioning.java    |  2 +-
 2 files changed, 57 insertions(+), 16 deletions(-)

diff --git a/pom.xml b/pom.xml
index f17bd19..58f723c 100644
--- a/pom.xml
+++ b/pom.xml
@@ -1,16 +1,8 @@
 <project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
   <modelVersion>4.0.0</modelVersion>
-
-  <parent>
-    <groupId>org.spigotmc</groupId>
-    <artifactId>spigot-parent</artifactId>
-    <version>dev-SNAPSHOT</version>
-    <relativePath>../pom.xml</relativePath>
-  </parent>
-
-  <groupId>org.spigotmc</groupId>
-  <artifactId>spigot</artifactId>
+  <groupId>com.empireminecraft</groupId>
+  <artifactId>craftbukkit</artifactId>
   <packaging>jar</packaging>
   <version>1.4.7-R1.1-SNAPSHOT</version>
   <name>Spigot</name>
@@ -33,8 +25,8 @@
 
   <dependencies>
     <dependency>
-      <groupId>org.spigotmc</groupId>
-      <artifactId>spigot-api</artifactId>
+      <groupId>com.empireminecraft</groupId>
+      <artifactId>bukkit</artifactId>
       <version>${project.version}</version>
       <type>jar</type>
       <scope>compile</scope>
@@ -47,6 +39,29 @@
       <scope>compile</scope>
     </dependency>
     <dependency>
+      <groupId>c3p0</groupId>
+      <artifactId>c3p0</artifactId>
+      <version>0.9.1.2</version>
+      <type>jar</type>
+      <scope>compile</scope>
+    </dependency>
+    <!-- json-smart -->
+    <dependency>
+      <groupId>net.minidev</groupId>
+      <artifactId>json-smart</artifactId>
+      <version>1.1.1</version>
+      <type>jar</type>
+      <scope>compile</scope>
+    </dependency>
+    <!-- IntelliJ Annotations -->
+    <dependency>
+      <groupId>com.intellij</groupId>
+      <artifactId>annotations</artifactId>
+      <version>9.0.4</version>
+      <type>jar</type>
+      <scope>compile</scope>
+    </dependency>
+    <dependency>
       <groupId>net.sf.jopt-simple</groupId>
       <artifactId>jopt-simple</artifactId>
       <version>3.2</version>
@@ -136,6 +151,7 @@
 
   <!-- This builds a completely 'ready to start' jar with all dependencies inside -->
   <build>
+    <finalName>craftbukkit</finalName>
     <defaultGoal>clean install</defaultGoal>
     <plugins>
       <plugin>
@@ -263,10 +279,10 @@
       <plugin>
         <groupId>org.apache.maven.plugins</groupId>
         <artifactId>maven-compiler-plugin</artifactId>
-        <version>2.0.2</version>
+        <version>3.0</version>
         <configuration>
-          <source>1.5</source>
-          <target>1.5</target>
+          <source>1.7</source>
+          <target>1.7</target>
         </configuration>
       </plugin>
       <plugin>
@@ -281,6 +297,31 @@
             </excludes>
         </configuration>
       </plugin>
+      <plugin>
+        <artifactId>maven-antrun-plugin</artifactId>
+        <version>1.7</version>
+        <executions>
+          <execution>
+            <phase>install</phase>
+            <configuration>
+              <target>
+                <copy tofile="${basedir}/../../Library/craftbukkit.jar">
+                  <fileset dir="${basedir}/target" includes="craftbukkit.jar" />
+                </copy>
+                <copy tofile="${basedir}/../../../EMC-Test-Server/minecraft_server.jar">
+                  <fileset dir="${basedir}/target" includes="craftbukkit.jar" />
+                </copy>
+                <copy tofile="${basedir}/../../../EMC-Core/server/minecraft_server.jar">
+                  <fileset dir="${basedir}/target" includes="craftbukkit.jar" />
+                </copy>
+              </target>
+            </configuration>
+            <goals>
+              <goal>run</goal>
+            </goals>
+          </execution>
+        </executions>
+      </plugin> 
     </plugins>
     <pluginManagement>
       <plugins>
diff --git a/src/main/java/org/bukkit/craftbukkit/util/Versioning.java b/src/main/java/org/bukkit/craftbukkit/util/Versioning.java
index 9304637..2cf5a4f 100644
--- a/src/main/java/org/bukkit/craftbukkit/util/Versioning.java
+++ b/src/main/java/org/bukkit/craftbukkit/util/Versioning.java
@@ -11,7 +11,7 @@ public final class Versioning {
     public static String getBukkitVersion() {
         String result = "Unknown-Version";
 
-        InputStream stream = Bukkit.class.getClassLoader().getResourceAsStream("META-INF/maven/org.spigotmc/spigot-api/pom.properties");
+        InputStream stream = Bukkit.class.getClassLoader().getResourceAsStream("META-INF/maven/com.empireminecraft/bukkit/pom.properties");
         Properties properties = new Properties();
 
         if (stream != null) {
-- 
1.8.1.1

