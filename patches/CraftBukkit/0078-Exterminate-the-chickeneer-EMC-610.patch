From f555fafa6a100b40c6ecb574122c29478cc49ef9 Mon Sep 17 00:00:00 2001
From: Aikar <aikar@aikar.co>
Date: Sun, 19 Oct 2014 02:32:26 -0400
Subject: [PATCH] Exterminate the chickeneer - EMC-610

Wipe out chickens when the Jockey is killed.
---
 src/main/java/net/minecraft/server/EntityChicken.java |  6 ++++++
 src/main/java/net/minecraft/server/EntityZombie.java  | 10 ++++++++++
 2 files changed, 16 insertions(+)

diff --git a/src/main/java/net/minecraft/server/EntityChicken.java b/src/main/java/net/minecraft/server/EntityChicken.java
index a5a5ab5..da2b8c2 100644
--- a/src/main/java/net/minecraft/server/EntityChicken.java
+++ b/src/main/java/net/minecraft/server/EntityChicken.java
@@ -122,6 +122,12 @@ public class EntityChicken extends EntityAnimal {
         return this.isChickenJockey() ? 10 : super.getExpValue(entityhuman);
     }
 
+    // EMC start
+    public boolean d(NBTTagCompound nbttagcompound) {
+        return (!(isChickenJockey() && passenger == null)) && super.d(nbttagcompound);
+    }
+    // EMC end
+
     public void b(NBTTagCompound nbttagcompound) {
         super.b(nbttagcompound);
         nbttagcompound.setBoolean("IsChickenJockey", this.bv);
diff --git a/src/main/java/net/minecraft/server/EntityZombie.java b/src/main/java/net/minecraft/server/EntityZombie.java
index cc0a62e..16c5288 100644
--- a/src/main/java/net/minecraft/server/EntityZombie.java
+++ b/src/main/java/net/minecraft/server/EntityZombie.java
@@ -370,6 +370,16 @@ public class EntityZombie extends EntityMonster {
         }
     }
 
+    // EMC start
+    @Override
+    public void die(DamageSource damagesource) {
+        if (passenger instanceof EntityChicken) {
+            ((EntityLiving) passenger).die(damagesource);
+        }
+        super.die(damagesource);
+    }
+    // EMC end
+
     public GroupDataEntity prepare(GroupDataEntity groupdataentity) {
         Object object = super.prepare(groupdataentity);
         float f = this.world.b(this.locX, this.locY, this.locZ);
-- 
1.9.1

