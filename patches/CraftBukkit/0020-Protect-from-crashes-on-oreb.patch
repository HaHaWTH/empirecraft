From dd4aaa6cc1959747d024c01f4fce03e04eeab22b Mon Sep 17 00:00:00 2001
From: Aikar <aikar@aikar.co>
Date: Wed, 5 Jun 2013 21:34:04 -0400
Subject: [PATCH] Protect from crashes on oreb

---
 src/main/java/org/spigotmc/OrebfuscatorManager.java | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/src/main/java/org/spigotmc/OrebfuscatorManager.java b/src/main/java/org/spigotmc/OrebfuscatorManager.java
index 2adfb86..2d92ec1 100644
--- a/src/main/java/org/spigotmc/OrebfuscatorManager.java
+++ b/src/main/java/org/spigotmc/OrebfuscatorManager.java
@@ -80,7 +80,7 @@ public class OrebfuscatorManager
     public static void obfuscate(int chunkX, int chunkY, int bitmask, byte[] buffer, World world)
     {
         // If the world is marked as obfuscated
-        if ( world.getWorld().obfuscated )
+        if ( world.getWorld().obfuscated && buffer != null && buffer.length > 0)
         {
             // Initial radius to search around for air
             int initialRadius = 1;
-- 
1.8.3

