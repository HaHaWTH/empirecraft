From 7035c0b088b4a62df5e6eadee98bd96fb2fc0819 Mon Sep 17 00:00:00 2001
From: Aikar <aikar@aikar.co>
Date: Fri, 7 Feb 2014 23:21:16 -0500
Subject: [PATCH] Fire BlockPlaceEvent for half slab placement

---
 src/main/java/net/minecraft/server/ItemStep.java | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/src/main/java/net/minecraft/server/ItemStep.java b/src/main/java/net/minecraft/server/ItemStep.java
index 6448f35..121aced 100644
--- a/src/main/java/net/minecraft/server/ItemStep.java
+++ b/src/main/java/net/minecraft/server/ItemStep.java
@@ -54,6 +54,7 @@ public class ItemStep extends ItemBlock {
     }
 
     private boolean a(ItemStack itemstack, EntityHuman entityhuman, World world, int i, int j, int k, int l) {
+        final int clickedX = i, clickedY = j, clickedZ = k; // CraftBukkit
         if (l == 0) {
             --j;
         }
@@ -83,7 +84,7 @@ public class ItemStep extends ItemBlock {
         int j1 = i1 & 7;
 
         if (block == this.c && j1 == itemstack.getData()) {
-            if (world.b(this.d.a(world, i, j, k)) && world.setTypeAndData(i, j, k, this.d, j1, 3)) {
+            if (world.b(this.d.a(world, i, j, k)) && processBlockPlace(world, entityhuman, null, i, j, k, this.d, j1, clickedX, clickedY, clickedZ) && world.setTypeAndData(i, j, k, this.d, j1, 3)) { // CraftBukkit
                 world.makeSound((double) ((float) i + 0.5F), (double) ((float) j + 0.5F), (double) ((float) k + 0.5F), this.d.stepSound.getPlaceSound(), (this.d.stepSound.getVolume1() + 1.0F) / 2.0F, this.d.stepSound.getVolume2() * 0.8F);
                 --itemstack.count;
             }
-- 
1.8.3.2

