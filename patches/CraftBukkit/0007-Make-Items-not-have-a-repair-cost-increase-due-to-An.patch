From 48ff532d34e4434890f65c1eccb9113dad210007 Mon Sep 17 00:00:00 2001
From: Aikar <aikar@aikar.co>
Date: Mon, 31 Dec 2012 01:25:46 -0500
Subject: [PATCH] Make Items not have a repair cost increase due to Anvil
 usage.

---
 src/main/java/net/minecraft/server/ItemStack.java | 7 +++++++
 1 file changed, 7 insertions(+)

diff --git a/src/main/java/net/minecraft/server/ItemStack.java b/src/main/java/net/minecraft/server/ItemStack.java
index 8f0a5ad..85fe0a0 100644
--- a/src/main/java/net/minecraft/server/ItemStack.java
+++ b/src/main/java/net/minecraft/server/ItemStack.java
@@ -108,6 +108,12 @@ public final class ItemStack {
         if (nbttagcompound.hasKey("tag")) {
             // CraftBukkit - clear name from compound and make defensive copy as this data may be coming from the save thread
             this.tag = (NBTTagCompound) nbttagcompound.getCompound("tag").clone().setName("");
+
+            
+            // EMC - No repair cost on EMC.
+            if (this.tag.hasKey("RepairCost")) {
+                this.tag.setInt("RepairCost", 0);
+            }
         }
     }
 
@@ -382,6 +388,7 @@ public final class ItemStack {
     }
 
     public void setRepairCost(int i) {
+        i = 0; // EMC - no repair cost increases for EMC.
         if (!this.hasTag()) {
             this.tag = new NBTTagCompound();
         }
-- 
1.8.0.3

