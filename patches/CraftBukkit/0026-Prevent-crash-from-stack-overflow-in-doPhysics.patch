From 2ab9a1fe90dd932f04ef30e2e248a50e5cf5b020 Mon Sep 17 00:00:00 2001
From: Aikar <aikar@aikar.co>
Date: Mon, 15 Jul 2013 21:59:12 -0400
Subject: [PATCH] Prevent crash from stack overflow in doPhysics

---
 src/main/java/net/minecraft/server/World.java | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/src/main/java/net/minecraft/server/World.java b/src/main/java/net/minecraft/server/World.java
index 27d7fec..8be937a 100644
--- a/src/main/java/net/minecraft/server/World.java
+++ b/src/main/java/net/minecraft/server/World.java
@@ -529,7 +529,7 @@ public abstract class World implements IBlockAccess {
                     }
                     // CraftBukkit end
 
-                    block.doPhysics(this, i, j, k, l);
+                    try {block.doPhysics(this, i, j, k, l); } catch (StackOverflowError e) { } // Spigot
                 } catch (Throwable throwable) {
                     CrashReport crashreport = CrashReport.a(throwable, "Exception while updating neighbours");
                     CrashReportSystemDetails crashreportsystemdetails = crashreport.a("Block being updated");
-- 
1.8.3.2

