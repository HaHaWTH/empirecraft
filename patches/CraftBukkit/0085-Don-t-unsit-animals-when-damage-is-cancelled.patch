From 9013a5a6979f5cf215235f27cadcae2064314b62 Mon Sep 17 00:00:00 2001
From: Aikar <aikar@aikar.co>
Date: Wed, 10 Dec 2014 04:01:35 -0500
Subject: [PATCH] Don't unsit animals when damage is cancelled

---
 src/main/java/net/minecraft/server/EntityLiving.java | 1 +
 src/main/java/net/minecraft/server/EntityOcelot.java | 2 +-
 src/main/java/net/minecraft/server/EntityWolf.java   | 2 +-
 3 files changed, 3 insertions(+), 2 deletions(-)

diff --git a/src/main/java/net/minecraft/server/EntityLiving.java b/src/main/java/net/minecraft/server/EntityLiving.java
index db98d83..3cf279f 100644
--- a/src/main/java/net/minecraft/server/EntityLiving.java
+++ b/src/main/java/net/minecraft/server/EntityLiving.java
@@ -723,6 +723,7 @@ public abstract class EntityLiving extends Entity {
                             this.killer = null;
                         }
                     }
+                    if (entity instanceof EntityTameableAnimal) ((EntityTameableAnimal) entity).bp.setSitting(false); // EMC
                 }
 
                 if (flag) {
diff --git a/src/main/java/net/minecraft/server/EntityOcelot.java b/src/main/java/net/minecraft/server/EntityOcelot.java
index 83b6af2..b3482d7 100644
--- a/src/main/java/net/minecraft/server/EntityOcelot.java
+++ b/src/main/java/net/minecraft/server/EntityOcelot.java
@@ -127,7 +127,7 @@ public class EntityOcelot extends EntityTameableAnimal {
         if (this.isInvulnerable()) {
             return false;
         } else {
-            this.bp.setSitting(false);
+            // this.bp.setSitting(false); // EMC
             return super.damageEntity(damagesource, f);
         }
     }
diff --git a/src/main/java/net/minecraft/server/EntityWolf.java b/src/main/java/net/minecraft/server/EntityWolf.java
index 8f1ebf2..08a43f9 100644
--- a/src/main/java/net/minecraft/server/EntityWolf.java
+++ b/src/main/java/net/minecraft/server/EntityWolf.java
@@ -178,7 +178,7 @@ public class EntityWolf extends EntityTameableAnimal {
         } else {
             Entity entity = damagesource.getEntity();
 
-            this.bp.setSitting(false);
+            // this.bp.setSitting(false); // EMC
             if (entity != null && !(entity instanceof EntityHuman) && !(entity instanceof EntityArrow)) {
                 f = (f + 1.0F) / 2.0F;
             }
-- 
1.9.1

