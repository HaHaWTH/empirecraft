From c58f55006f7e1066323d09c2f7cd509278b9a67e Mon Sep 17 00:00:00 2001
From: Aikar <aikar@aikar.co>
Date: Sat, 31 Oct 2015 01:26:08 -0400
Subject: [PATCH] improve Timings v2

---
 src/main/java/org/spigotmc/timings/TimedEventExecutor.java | 7 +++++--
 1 file changed, 5 insertions(+), 2 deletions(-)

diff --git a/src/main/java/org/spigotmc/timings/TimedEventExecutor.java b/src/main/java/org/spigotmc/timings/TimedEventExecutor.java
index b4cf438..fff3269 100644
--- a/src/main/java/org/spigotmc/timings/TimedEventExecutor.java
+++ b/src/main/java/org/spigotmc/timings/TimedEventExecutor.java
@@ -54,12 +54,15 @@ public class TimedEventExecutor implements EventExecutor {
         }
         id = method.getDeclaringClass().getName();
 
-        this.timings = Timings.ofSafe(plugin.getName(), "Event: " + id + " (" + eventClass.getSimpleName() + ")", null);
+        final String eventName = eventClass.getSimpleName();
+        boolean verbose = "BlockPhysicsEvent".equals(eventName) || "Drain".equals(eventName) || "Fill".equals(eventName);
+        this.timings = Timings.ofSafe(plugin.getName(), (verbose ? "## " : "") +
+            "Event: " + id + " (" + eventName + ")", null);
     }
 
     @Override
     public void execute(Listener listener, Event event) throws EventException {
-        if (event.isAsynchronous() || !Timings.timingsEnabled || !Bukkit.isPrimaryThread()) {
+        if (event.isAsynchronous() || !Timings.timingsEnabled) {
             executor.execute(listener, event);
             return;
         }
-- 
2.6.2

